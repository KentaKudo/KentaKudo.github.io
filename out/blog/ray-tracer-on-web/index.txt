2:I[3415,["415","static/chunks/415-9d3298cc5ef4039b.js","604","static/chunks/604-e21c8d526cde1ad9.js","308","static/chunks/app/blog/%5Bslug%5D/page-88a7ad854e2d1e66.js"],"Image"]
3:I[4008,["415","static/chunks/415-9d3298cc5ef4039b.js","604","static/chunks/604-e21c8d526cde1ad9.js","308","static/chunks/app/blog/%5Bslug%5D/page-88a7ad854e2d1e66.js"],"ShareButton"]
4:I[2904,["415","static/chunks/415-9d3298cc5ef4039b.js","604","static/chunks/604-e21c8d526cde1ad9.js","308","static/chunks/app/blog/%5Bslug%5D/page-88a7ad854e2d1e66.js"],"RayTracerCanvas"]
5:I[3726,[],""]
7:I[604,[],""]
8:I[9686,["878","static/chunks/878-418ad8d4516af2fa.js","848","static/chunks/848-4db682419520eef0.js","185","static/chunks/app/layout-0abfa56b90d23509.js"],"Header"]
6:["slug","ray-tracer-on-web","d"]
0:["doTwbMBCbIN1AHoFFU1dq",[[["",{"children":["blog",{"children":[["slug","ray-tracer-on-web","d"],{"children":["__PAGE__?{\"slug\":\"ray-tracer-on-web\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","ray-tracer-on-web","d"],{"children":["__PAGE__",{},[["$L1",[["$","figure",null,{"className":"flex flex-col gap-1 items-center","children":[["$","$L2",null,{"src":"/images/laser.jpg","alt":"Laser beams in darkness","className":"rounded-lg overflow-hidden shadow-md","width":736,"height":490}],["$","figcaption",null,{"dangerouslySetInnerHTML":{"__html":"Photo by <a href=\"https://unsplash.com/@clyde_he?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Clyde He</a> on <a href=\"https://unsplash.com/s/photos/light?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Unsplash</a>"},"className":"text-slate-400 text-sm [&>a]:italic [&>a]:underline"}]]}],["$","div",null,{"className":"flex items-center justify-between mt-8","children":[["$","h1",null,{"className":"font-bold text-4xl","children":"Ray Tracer on Web"}],["$","$L3",null,{"url":"/blog/ray-tracer-on-web","title":"Ray Tracer on Web"}]]}],["$","time",null,{"className":"italic text-slate-400 block mt-2 mb-8","children":"March 3, 2022"}],["$","main",null,{"className":"flex flex-col gap-4 pt-20 pb-24 [&_h2]:text-2xl [&_h3]:text-xl [&_h4]:text-lg [&_:is(h2,h3,h4,h5,h6)]:font-bold [&_:is(h2,h3,h4,h5,h6)]:leading-relaxed [&_:is(h2,h3,h4,h5,h6)]:mt-8 [&_a]:underline [&_a]:underline-offset-2 [&_a]:decoration-slate-300 [&_aside]:text-accent-foreground [&_aside]:bg-accent [&_aside]:rounded-md [&_aside]:p-5 [&_ul]:pl-4 [&_ul]:list-disc [&_ul]:list-outside [&_ul_ul]:pl-8","children":[["$","p",null,{"children":"First things first: demonstration. Try clicking the Run button below. It's going to take a bit while until the result pops up, so please be patient:)"}],"\n",["$","p",null,{"children":["(NOTE: Web Worker must be ",["$","a",null,{"href":"https://caniuse.com/webworkers","children":"supported"}]," on your browser.)"]}],"\n","\n",["$","$L4",null,{}],"\n",["$","p",null,{"children":["It didn't load the image but ",["$","strong",null,{"children":"generated it on your device"}]," using the power of Web Assembly. Because it has some random factor, it produces slightly different images every time you run it."]}],"\n",["$","p",null,{"children":"It's cool, isn't it?"}],"\n",["$","p",null,{"children":"I'm first going to touch on what ray tracer / ray tracing is for those who are not familiar with it. Then look at details of how I ran it in the browser."}],"\n","\n",["$","aside",null,{"children":["$","p",null,{"children":["Many thanks to ",["$","a",null,{"href":"https://twitter.com/Peter_shirley","children":"@Peter_shirley"}]," who wrote a phenomenal tutorial ",["$","a",null,{"href":"https://raytracing.github.io/books/RayTracingInOneWeekend.html","children":"Ray Tracing In One Weekend"}],". I just followed his tutorial using Rust instead of C++."]}]}],"\n",["$","p",null,{"children":["The source code is available on ",["$","a",null,{"href":"https://github.com/KentaKudo/wasm-raytracer","children":"GitHub"}],", and also published as a ",["$","a",null,{"href":"https://www.npmjs.com/package/wasm-raytracer","children":"NPM package"}],"."]}],"\n",["$","h2",null,{"id":"contents","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#contents","children":["$","span",null,{"className":"icon icon-link"}]}],"Contents"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","a",null,{"href":"#whats-ray-tracing","children":"What's ray tracing?"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#scene","children":"Scene"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#camera","children":"Camera"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#ray","children":"Ray"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#ray-tracer--web-assembly","children":"Ray tracer + Web Assembly"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#canvas-api","children":"Canvas API"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#wasm-bindgen","children":"wasm-bindgen"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#web-worker","children":"Web Worker"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#multi-threading","children":"Multi-threading"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#why-ray-tracer","children":"Why ray tracer?"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#references","children":"References"}]}],"\n"]}],"\n",["$","h2",null,{"id":"whats-ray-tracing","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#whats-ray-tracing","children":["$","span",null,{"className":"icon icon-link"}]}],"What's ray tracing?"]}],"\n",["$","p",null,{"children":"Ray tracing is a technique used to render a scene. Pay close attention to the shadows and the reflection on water, walls, floors, and glasses in this video."}],"\n",["$","iframe",null,{"width":"560","height":"315","src":"https://www.youtube.com/embed/Xf2QCdScU6o","title":"YouTube video player","allow":"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowFullScreen":true,"className":"mx-auto"}],"\n",["$","p",null,{"children":"You may find the scene rendered by ray tracing more natural."}],"\n",["$","p",null,{"children":["While ray tracing is computationaly more expensive than the widely used method ",["$","em",null,{"children":"rasterisation"}],", it's been increasing its presence in movie and game rendering with the help of the latest advance in GPU technology."]}],"\n",["$","p",null,{"children":"Programatically, it calculates the colour of each pixel in the image from top left to right bottom tracing \"rays\" from a \"camera\" to the \"scene\"."}],"\n",["$","h3",null,{"id":"scene","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#scene","children":["$","span",null,{"className":"icon icon-link"}]}],"Scene"]}],"\n",["$","p",null,{"children":"A scene is the world where all the objects, for example cars, lights, buildings, and so on, are placed. My ray tracer only has simple spheres as they're easy to model, but you can put literally any objects in any positions if you manage to model it."}],"\n",["$","p",null,{"children":["You can add other factors to objects to make it look more real. One such factor is a ",["$","strong",null,{"children":"material"}]," the object is made of. Depending on the material, the object behaves differently when a ray hits. Materials supported by my version of ray tracer are:"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Lambertian — a material that reflects the ray to a random direction,"}],"\n",["$","li",null,{"children":"Metal — a material that reflects the ray to the direction calculated from the incoming ray's angle, and"}],"\n",["$","li",null,{"children":"Dielectric (glasses) — a material that refracts the ray to the inside of the object."}],"\n"]}],"\n","\n",["$","figure",null,{"children":[["$","img",null,{"src":{"src":"/_next/static/media/materials.5aa8afc9.png","height":638,"width":2694,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAJ0lEQVR42hXIsREAAAjCQPcfGQindvlMwRLwYbeFP5PkTHv4AEmxF56BLz1TSs8QAAAAAElFTkSuQmCC","blurWidth":8,"blurHeight":2},"alt":"Lambertian casts a ray to a random direction, Metal reflects, Dielectric refracts"}],["$","figcaption",null,{"children":"Each material baheves differently when a ray hits it"}]]}],"\n",["$","p",null,{"children":"Once you define a scene, the next thing you need to do is to specify where you look at the scene from."}],"\n",["$","h3",null,{"id":"camera","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#camera","children":["$","span",null,{"className":"icon icon-link"}]}],"Camera"]}],"\n",["$","p",null,{"children":"A camera is your eyes. All the rays start their journey from the camera. It's defined with two main parameters:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"position — the place where you look at the scene from, and"}],"\n",["$","li",null,{"children":"atitude — the direction of its gaze"}],"\n"]}],"\n",["$","p",null,{"children":"In addition to them, you also need to configure\n(1) a viewport which has the same aspect ratio as the final image, think it as a window which you look at the scene through, and\n(2) the distance between the camera and the viewport, which is called \"focal length\"."}],"\n",["$","p",null,{"children":"Once the camera is positioned, it's ready to start casting rays."}],"\n",["$","h3",null,{"id":"ray","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#ray","children":["$","span",null,{"className":"icon icon-link"}]}],"Ray"]}],"\n",["$","p",null,{"children":"A ray is casted from the camera to the direction of the pixel it's interested in at the time. The casted ray may or may not hit objects placed in the scene. If it hits something, it first records the color of the object surface. Then, it produces another ray, the direction of which depends on the material of the object as explained in the scene section, from the hit point."}],"\n",["$","p",null,{"children":"The tracing of the ray stops either\n(1) when the ray goes deep into the shadow or\n(2) when it doesn't hit anything anymore, which means it reaches the ambient light (or sky so to speak).\nThe final colour of the pixel is calculated at that point."}],"\n","\n",["$","figure",null,{"children":[["$","img",null,{"src":{"src":"/_next/static/media/ray.ab22f79e.png","height":1101,"width":2274,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAT0lEQVR42h2KQQqAMAwE+/8vevAoiuil1aZJJqYuLCw7UwBVdfDekfFqP58rIkq+IjKZWbi30fZ6TJAFzDzH3XTdJQXwAvwsMlfVZetqBHxW3l3MWb2UpQAAAABJRU5ErkJggg==","blurWidth":8,"blurHeight":4},"alt":"A ray is cast from a camera to the scene through a frame in between them calculating the final colour of the pixel"}],["$","figcaption",null,{"children":"Tracing the journey of the ray"}]]}],"\n",["$","p",null,{"children":["This is a quick explanation of what the ray tracer is. See the ",["$","a",null,{"href":"#references","children":["$","em",null,{"children":"References"}]}]," section to continue reading more about ray tracing if you're interested."]}],"\n",["$","p",null,{"children":"Now, let's talk about what I did to run it on web browser."}],"\n",["$","h2",null,{"id":"ray-tracer--web-assembly","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#ray-tracer--web-assembly","children":["$","span",null,{"className":"icon icon-link"}]}],"Ray tracer + Web Assembly"]}],"\n",["$","p",null,{"children":"The first thing I had to do was make a decision on how JavaScript and Rust should communicate each other; more precisely, how to pass images from Rust to JavaScript."}],"\n",["$","h3",null,{"id":"canvas-api","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#canvas-api","children":["$","span",null,{"className":"icon icon-link"}]}],"Canvas API"]}],"\n",["$","p",null,{"children":["To draw an image on the screen, I used the <canvas> HTML element. Its ",["$","code",null,{"children":"putImageData()"}]," API receives input image as an ",["$","code",null,{"children":"ImageData"}]," object, and the image data is given as ",["$","code",null,{"children":"Uint8ClampedArray"}],", which is expected to be an array containing the pixel data in the RGBA order."]}],"\n","\n",["$","figure",null,{"children":["$","img",null,{"src":{"src":"/_next/static/media/canvas-api.0d42b62c.png","height":314,"width":1708,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAIAAABsYngUAAAAGElEQVR42mP4CQZ/YOD///+fP39+/eYNACVTF0w5Y5WdAAAAAElFTkSuQmCC","blurWidth":8,"blurHeight":1},"alt":"Uint8ClampedArray is used for ImageData then passed to canvas HTML element."}]}],"\n",["$","p",null,{"children":["Long story short, the goal is to return a properly serialised ",["$","code",null,{"children":"Uint8ClampedArray"}]," from the Rust programme."]}],"\n",["$","h3",null,{"id":"wasm-bindgen","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#wasm-bindgen","children":["$","span",null,{"className":"icon icon-link"}]}],"wasm-bindgen"]}],"\n",["$","p",null,{"children":[["$","a",null,{"href":"https://github.com/rustwasm/wasm-bindgen","children":"wasm-bindgen"}]," is a library that bridges the gap between JavaScript and the Web Assembly module written in Rust."]}],"\n",["$","p",null,{"children":["What I needed to do so the ",["$","code",null,{"children":"render"}]," function can be called from JavaScript and return ",["$","code",null,{"children":"Uint8ClampedArray"}]," was to add a ",["$","code",null,{"children":"#[wasm_bindgen]"}]," annotation and modify the return type:"]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-rust","children":[["$","span",null,{"className":"hljs-keyword","children":"use"}]," wasm_bindgen::prelude::*;\n\n",["$","span",null,{"className":"hljs-meta","children":"#[wasm_bindgen]"}],"\n",["$","span",null,{"className":"hljs-keyword","children":"pub"}]," ",["$","span",null,{"className":"hljs-keyword","children":"fn"}]," ",["$","span",null,{"className":"hljs-title function_","children":"render"}],"(width: ",["$","span",null,{"className":"hljs-type","children":"u16"}],", height: ",["$","span",null,{"className":"hljs-type","children":"u16"}],") ",["$","span",null,{"className":"hljs-punctuation","children":"->"}]," Uint8ClampedArray {\n\n  ",["$","span",null,{"className":"hljs-comment","children":"// ...setup a scene and a camera"}],"\n\n  ",["$","span",null,{"className":"hljs-keyword","children":"let"}]," ",["$","span",null,{"className":"hljs-keyword","children":"mut "}],["$","span",null,{"className":"hljs-variable","children":"img"}]," = ",["$","span",null,{"className":"hljs-built_in","children":"vec!"}],"[];\n\n  ",["$","span",null,{"className":"hljs-comment","children":"// ...build image"}],"\n\n  ",["$","span",null,{"className":"hljs-comment","children":"// convert from [u8] to Uint8ClampedArray using Into trait."}],"\n  img[..].",["$","span",null,{"className":"hljs-title function_ invoke__","children":"into"}],"()\n}\n"]}]}],"\n",["$","p",null,{"children":"This is basically everything I needed to run the ray tracer in web browser, but there was one issue when I tried it: the browser got stuck while running the ray tracer. What I was missing was to follow this advice:"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["The main thread in a browser cannot block. This means that if you run WebAssembly code on the main thread you can never block, meaning you can't do so much as acquire a mutex. This is an extremely difficult limitation to work with on the web, although one workaround is to run wasm exclusively in web workers and run JS on the main thread. It is possible to run the same wasm across all threads, but you need to be extremely vigilant about synchronization with the main thread. —— ",["$","a",null,{"href":"https://rustwasm.github.io/wasm-bindgen/examples/raytrace.html#caveats","children":"Parallel Raytracing#caveats"}]]}],"\n"]}],"\n",["$","p",null,{"children":"Because ray tracing takes some time and blocks the thread where it runs, running it on the main thread is a no-no; I made a first encounter to Web Worker...!"}],"\n",["$","h3",null,{"id":"web-worker","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#web-worker","children":["$","span",null,{"className":"icon icon-link"}]}],"Web Worker"]}],"\n",["$","p",null,{"children":["Regardless of its unfriendly interface (",["$","a",null,{"href":"https://github.com/GoogleChromeLabs/comlink","children":"Comlink"}]," can be a help for it), using Web Worker is not super complicated."]}],"\n",["$","p",null,{"children":["The main thread needs to (1) instantiate a worker specifying the path to the worker file, (2) invoke it passing arguments via ",["$","code",null,{"children":"postMessage"}]," API, and (3) listen to the result by registering an ",["$","code",null,{"children":"onmessage"}]," callback:"]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-js","children":[["$","span",null,{"className":"hljs-keyword","children":"const"}]," w = ",["$","span",null,{"className":"hljs-keyword","children":"new"}]," ",["$","span",null,{"className":"hljs-title class_","children":"Worker"}],"(",["$","span",null,{"className":"hljs-string","children":"\"../path/to/the/worker/file\""}],");\nw.",["$","span",null,{"className":"hljs-title function_","children":"postMessage"}],"([",["$","span",null,{"className":"hljs-variable constant_","children":"WIDTH"}],", ",["$","span",null,{"className":"hljs-variable constant_","children":"HEIGHT"}],"]);\nw.",["$","span",null,{"className":"hljs-property","children":"onmessage"}]," = ",["$","span",null,{"className":"hljs-function","children":["(",["$","span",null,{"className":"hljs-params","children":"{ data: rendered }"}],") =>"]}]," {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," imageData = ",["$","span",null,{"className":"hljs-keyword","children":"new"}]," ",["$","span",null,{"className":"hljs-title class_","children":"ImageData"}],"(rendered, ",["$","span",null,{"className":"hljs-variable constant_","children":"WIDTH"}],");\n  canvas.",["$","span",null,{"className":"hljs-title function_","children":"getContext"}],"(",["$","span",null,{"className":"hljs-string","children":"\"2d\""}],").",["$","span",null,{"className":"hljs-title function_","children":"putImageData"}],"(imageData, ",["$","span",null,{"className":"hljs-number","children":"0"}],", ",["$","span",null,{"className":"hljs-number","children":"0"}],");\n};\n"]}]}],"\n",["$","p",null,{"children":["The worker in return defines an ",["$","code",null,{"children":"onmessage"}]," method, calls the wasm function, and pass back the result using ",["$","code",null,{"children":"postMessage"}]," API:"]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-js","children":["onmessage = ",["$","span",null,{"className":"hljs-keyword","children":"async"}]," ",["$","span",null,{"className":"hljs-keyword","children":"function"}]," (",["$","span",null,{"className":"hljs-params","children":"e"}],") {\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," { render } = ",["$","span",null,{"className":"hljs-keyword","children":"await"}]," ",["$","span",null,{"className":"hljs-keyword","children":"import"}],"(",["$","span",null,{"className":"hljs-string","children":"\"wasm-raytracer\""}],");\n  ",["$","span",null,{"className":"hljs-keyword","children":"const"}]," rendered = ",["$","span",null,{"className":"hljs-title function_","children":"render"}],"(e.",["$","span",null,{"className":"hljs-property","children":"data"}],"[",["$","span",null,{"className":"hljs-number","children":"0"}],"], e.",["$","span",null,{"className":"hljs-property","children":"data"}],"[",["$","span",null,{"className":"hljs-number","children":"1"}],"]);\n  ",["$","span",null,{"className":"hljs-title function_","children":"postMessage"}],"(rendered);\n};\n"]}]}],"\n",["$","p",null,{"children":"This was all I needed to run ray tracer on a dedicated thread."}],"\n",["$","p",null,{"children":"Before closing the section, I address the performance issue I tried to solve."}],"\n",["$","h3",null,{"id":"multi-threading","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#multi-threading","children":["$","span",null,{"className":"icon icon-link"}]}],"Multi-threading"]}],"\n",["$","p",null,{"children":"Even though now it's separated from the main thread, running it on a single thread takes a bit of time. To improve performance, I looked at options to run it on multiple threads."}],"\n",["$","p",null,{"children":["The calculation of each pixel can be done in isolatation from each other, and ",["$","em",null,{"children":"fork-join parallelism"}],", which is to ",["$","em",null,{"children":"fork"}]," to start a new thread and to join to ",["$","em",null,{"children":"wait"}]," for it to finish, can be applied using libraries such as ",["$","a",null,{"href":"https://github.com/rayon-rs/rayon","children":"Rayon"}],"."]}],"\n",["$","p",null,{"children":"Even though it wasn't difficult to turn the programme into the multi-thread version, there were a couple of challenges to run it in the browser environment:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["WebAssembly threads are not supported by ",["$","a",null,{"href":"https://webassembly.org/roadmap/","children":"some browsers"}]," yet."]}],"\n",["$","li",null,{"children":["To enable it, ",["$","a",null,{"href":"https://web.dev/coop-coep/","children":"COOP and COEP headers"}]," need to be configured properly, which is not possble for GitHub pages where this blog is hosted as of today."]}],"\n",["$","li",null,{"children":["Because Rust's wasm build target doesn't assume it's going to be run in browsers, the standard library ",["$","code",null,{"children":"std::thread"}]," is not aware of Web Workers that enable WebAssembly threads on browser environments."]}],"\n",["$","li",null,{"children":["The ",["$","a",null,{"href":"https://github.com/GoogleChromeLabs/wasm-bindgen-rayon","children":[["$","code",null,{"children":"wasm-bindgen-rayon"}]," library"]}]," enables compiling multi-thread code written with the Rayon library into threads aware wasm, but only with the nightly version of Rust."]}],"\n"]}],"\n",["$","p",null,{"children":"For those reasons, I gave up multi-threading for now hoping I can introduce it in the near future."}],"\n",["$","h2",null,{"id":"why-ray-tracer","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#why-ray-tracer","children":["$","span",null,{"className":"icon icon-link"}]}],"Why ray tracer?"]}],"\n",["$","p",null,{"children":["This is kind of a detour from my journey of the ",["$","a",null,{"href":"/blog/cpu-experiment","children":"CPU experiment"}]," aimed at understanding what ray tracer is and how to implement it (+ not to mention learning Rust). Next challenge is to migrate the ray tracer programme to the Hack/Jack system I built while I was reading the book I introduced in the last section of the ",["$","a",null,{"href":"/blog/the-power-of-nand","children":"The Power of NAND"}]," post. Bye for now:)"]}],"\n",["$","h2",null,{"id":"references","children":[["$","a",null,{"aria-hidden":"true","tabIndex":"-1","href":"#references","children":["$","span",null,{"className":"icon icon-link"}]}],"References"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"https://raytracing.github.io/books/RayTracingInOneWeekend.html","children":"Ray Tracing In One Weekend"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"https://blog.singleton.io/posts/2022-01-02-raytracing-with-rust/","children":"The joy of building a ray tracer, for fun, in Rust."}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"https://bheisler.github.io/post/writing-raytracer-in-rust-part-1/","children":"Writing a Raytracer in Rust"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"https://clayto.com/2021/07/shaking-off-the-rust-2-ray-tracing-in-webassembly/","children":"Shaking Off the Rust 2: Ray Tracing in WebAssembly"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"https://rustwasm.github.io/wasm-bindgen/examples/raytrace.html","children":"Parallel Raytracing"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"https://web.dev/webassembly-threads/","children":"Using WebAssembly threads from C, C++ and Rust"}]}],"\n"]}]]}]]],null],null]},["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$6","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/59ab89f451b37a95.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},[["$","main",null,{"className":"w-full max-w-screen-md mx-auto py-4 px-4","children":["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}],null],null]},[["$","html",null,{"lang":"en","className":"__variable_03f989","children":[["$","head",null,{"children":[["$","script",null,{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-FC2KF4RL0P"}],["$","script",null,{"async":true,"dangerouslySetInnerHTML":{"__html":"\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', 'G-FC2KF4RL0P');\n              "}}]]}],["$","body",null,{"children":[["$","$L8",null,{}],["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/2adcbd32d109d254.css","precedence":"next","crossOrigin":"$undefined"}]],[null,"$L9"]]]]]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Ray Tracer on Web | Kenta Kudo"}],["$","meta","3",{"name":"description","content":"I have been working on writing a ray tracer in Rust in the last few weeks. This post is to show off what I could achieve:)"}],["$","meta","4",{"property":"og:title","content":"Kenta Kudo"}],["$","meta","5",{"property":"og:description","content":"Welcome to my page!"}],["$","meta","6",{"property":"og:image","content":"https://kentakudo.com/images/river-themes.jpg"}],["$","meta","7",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","8",{"name":"twitter:creator","content":"@___________k_k_"}],["$","meta","9",{"name":"twitter:title","content":"Kenta Kudo"}],["$","meta","10",{"name":"twitter:description","content":"Welcome to my page!"}],["$","meta","11",{"name":"twitter:image","content":"https://kentakudo.com/images/river-themes.jpg"}],["$","link","12",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"72x72"}],["$","meta","13",{"name":"next-size-adjust"}]]
1:null
